var conTrol,listdata,len,tiamr,nowindex,data=window.palyer,audio=data.Aniome;function getDate(a){$.ajax({type:"GET",url:a,success:function(a){data.listStyle(a),len=a.length,conTrol=new data.Index(len),listdata=a,clike(),touchTo(),$("body").trigger("chenge",0)},error:function(){console.log("失败了")}})}var autoPalytimer=setInterval(function(){data.por.palyTmer()==listdata[nowindex].duration&&AutomaticallyPlay()},1e3);function AutomaticallyPlay(){var a=conTrol.next();$("body").trigger("chenge",a),data.por.ping(0),"pause"==audio.status&&(audio.pause(),data.por.stop()),audio.aoutNextPaly(listdata[a].audio)}function clike(){$("body").on("chenge",function(a,t){data.setdata(listdata[t]),audio.getAudio(listdata[t].audio),data.por.timer(listdata[t].duration),nowindex=t,"play"==audio.status&&(audio.play(),router(0),data.por.stop()),$(".img-box").attr("data-deg",0),$(".img-box").css({transform:"rotateZ(0deg)",transition:"none"})}),$(".prev").on("click",function(){var a=conTrol.prev();$("body").trigger("chenge",a),data.por.ping(0),"pause"==audio.status&&(audio.pause(),data.por.stop())}),$(".next").on("click",function(){var a=conTrol.next();$("body").trigger("chenge",a),data.por.ping(0),"pause"==audio.status&&(audio.pause(),data.por.stop())}),$(".play").on("click",function(){(console.log(audio.status),"pause"==audio.status)?(audio.play(),data.por.ping(),router($(".img-box").attr("data-deg"))):(audio.pause(),data.por.stop(),clearInterval(tiamr))}),$(".like").on("click",function(){}),$(".list").on("click",function(){$(".listmin").addClass("reovem")}),$(".butr").on("click",function(){$(".listmin").removeClass("reovem")})}function router(a){clearInterval(tiamr),a=+a%360,tiamr=setInterval(function(){a+=2,$(".img-box").attr("data-deg",a),$(".img-box").css({transform:"rotateZ("+a+"deg)",transition:"all 0.5s ease-in"})},500)}function touchTo(){var a=$(".box").offset(),n=a.left,i=a.width;$(".red").on("touchstart",function(a){data.por.stop(),audio.pause()}).on("touchmove",function(a){var t=(a.changedTouches[0].clientX-n)/i;0<t&&t<1&&data.por.update(t)}).on("touchend",function(a){var t=(a.changedTouches[0].clientX-n)/i;if(0<t&&t<1){var o=t*listdata[conTrol.index].duration;$(".play").addClass("playin"),audio.playTo(o),audio.play(),audio.status="play",data.por.ping(t)}})}getDate("http://localhost:8080/dist/mock/data.json");